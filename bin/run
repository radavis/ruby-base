#!/usr/bin/env bash
#
# Wrapper script for "docker run". Script arguments passed as arguments to "docker run".
#
# Example Usage:
#
#   bin/run irb
#   bin/run bash
#   bin/run rails --help
#   bin/run ruby lib/hello_world.rb

set -Eeuo pipefail

args="$*"
image="ruby-base"
name="ruby-app"
network="ruby-net"
port=3000

# docker run [OPTIONS] IMAGE [COMMAND] [ARG...]
docker run \
  --rm \
  --interactive \
  --tty \
  --name ${name} \
  --network ${network} \
  --volume "$(pwd):/home/app" \
  --user "$(id -u):$(id -g)" \
  -p ${port} \
  ${image} \
  ${args}
